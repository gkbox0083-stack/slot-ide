# slot-ide 測試指引

> ✅ **MVP 完成** — 本文件提供產品測試流程參考

---

## 快速開始

```bash
# 安裝依賴
npm install

# 啟動開發伺服器
npm run dev

# 開啟瀏覽器訪問（通常是 http://localhost:5173）
```

---

## 功能測試流程

### 1. 盤池建立測試

#### 步驟
1. 開啟「控制」Tab
2. 設定盤池上限（預設 100）
3. 點擊「Build Pools」按鈕

#### 驗證
- [ ] 狀態顯示「✅ 已建立」
- [ ] 盤池詳情顯示各 Outcome 的盤面數量
- [ ] 所有盤池都達到 cap 上限

---

### 2. 單次 Spin 測試

#### 步驟
1. 確認盤池已建立
2. 點擊「Spin」按鈕
3. 觀察動畫播放

#### 驗證
- [ ] 5 輪開始滾動
- [ ] 依序停輪（從左到右）
- [ ] 停輪後顯示正確符號
- [ ] 如有中獎線，顯示金色連線
- [ ] 中獎符號有高亮效果
- [ ] 上次結果顯示正確的 Outcome 和獲勝金額

---

### 3. 跳過動畫測試

#### 步驟
1. 點擊「Spin」開始動畫
2. 在動畫進行中點擊「跳過」

#### 驗證
- [ ] 動畫立即停止
- [ ] 顯示最終盤面
- [ ] 中獎線正確顯示

---

### 4. 批次模擬測試

#### 步驟
1. 選擇模擬次數（100 / 1000 / 10000 或自訂）
2. 點擊「開始模擬」
3. 等待模擬完成

#### 驗證
- [ ] 進度條正確更新
- [ ] 可以點擊「停止」中斷模擬
- [ ] 統計結果顯示：RTP / Hit Rate / Avg Win
- [ ] 各 Outcome 分佈正確
- [ ] 「顯示圖表」可開啟圖表視窗
- [ ] 「匯出 CSV」可下載報表

---

### 5. 動畫參數測試

#### 步驟
1. 開啟「視覺」Tab
2. 調整各項動畫參數
3. 執行 Spin 觀察效果

#### 驗證
- [ ] 滾輪轉速調整生效
- [ ] 旋轉時長調整生效
- [ ] 停輪間隔調整生效
- [ ] 緩停力度調整生效
- [ ] 回彈力度調整生效

---

### 6. 盤面視覺測試

#### 步驟
1. 在「視覺」Tab 調整盤面參數
2. 觀察 Runtime 變化

#### 驗證
- [ ] 卷軸間距調整生效
- [ ] 圖示縮放調整生效
- [ ] 盤面縮放調整生效

---

### 7. 素材上傳測試

#### 步驟
1. 開啟「素材」Tab
2. 上傳各類素材

#### 驗證
- [ ] Symbol 圖片上傳後立即顯示
- [ ] 盤面底圖上傳後立即顯示
- [ ] 盤面框上傳後立即顯示
- [ ] 背景圖上傳後立即顯示
- [ ] 人物圖上傳後立即顯示
- [ ] 清除單一素材正常
- [ ] 清除所有素材正常
- [ ] 頁面重新整理後素材仍在

---

### 8. 數學參數測試

#### 步驟
1. 開啟「數學」Tab
2. 修改 Outcome / Symbol 設定
3. 重新 Build Pools
4. 執行 Simulation 驗證

#### 驗證
- [ ] Outcome 倍率區間修改後，模擬結果反映變化
- [ ] Outcome 權重修改後，分佈比例反映變化
- [ ] Symbol 分數修改後，獲勝金額反映變化
- [ ] Symbol 出現率修改後，盤面組成反映變化

---

## 驗證清單

### 核心功能
- [ ] Build Pools 正常運作
- [ ] 單次 Spin 正常運作
- [ ] 動畫播放流暢
- [ ] 盤面與 SpinPacket.board 一致
- [ ] 中獎線正確顯示

### 統計功能
- [ ] Simulation 正常執行
- [ ] RTP 計算正確
- [ ] Hit Rate 計算正確
- [ ] CSV 匯出正確

### 視覺功能
- [ ] 動畫參數即時反映
- [ ] 盤面視覺即時反映
- [ ] 素材上傳即時反映

### 持久化
- [ ] 素材儲存於 localStorage
- [ ] 頁面重新整理後素材仍在

---

## 進階測試

### 壓力測試
1. 連續點擊 Spin 100 次
2. 執行 10000 次模擬
3. 上傳多個大圖片素材

### 邊界測試
1. 設定極端的動畫參數（最小/最大值）
2. 設定極端的倍率區間
3. 設定極端的權重比例

### 回歸測試
1. 修改任何參數後，之前的功能是否正常
2. 上傳素材後，動畫是否正常
3. 清除素材後，是否恢復預設

---

## 疑難排解

### 符號錯位
- 檢查 Console 的 Board 與實際顯示是否一致
- 確認動畫完成後才顯示中獎線

### 輪帶消失
- 檢查 Console 是否有錯誤訊息
- 確認 SpinPacket 結構完整

### 素材不顯示
- 檢查 localStorage 是否有儲存
- 確認圖片格式正確（png/jpg/gif/webp）
- 確認圖片大小未超過 500KB

### 統計數據異常
- 檢查 Outcome 權重設定
- 檢查 Symbol 分數設定
- 確認盤池有足夠的盤面

---

## 開發者測試

### 編譯檢查
```bash
npm run build
```

### 型別檢查
```bash
npx tsc --noEmit
```

### 搜尋遺留問題
```bash
# 搜尋 any 型別
grep -r ": any" src/

# 搜尋 TODO
grep -r "TODO" src/
```
